<?xml version='1.1' encoding='UTF-8' standalone='yes'?>
<!--
 Copyright (c) 2005-2007 UAB "MAKSINETA".
 All rights reserved. This program and the accompanying materials
 are made available under the terms of the Common Public License Version 1.0
 which accompanies this distribution, and is available at
 http://www.eclipse.org/legal/cpl-v10.html
 
 Contributors:
     "Maxim Kizub" mkizub@symade.com - initial design and implementation
-->
<sop:dump version='1.0' xmlns:sop='sop://sop/'
  xmlns:core='sop://languages/core?class=kiev.vlang.CoreLang'
  xmlns:macro='sop://languages/macro?class=kiev.vlang.MacroLang'>
 <core:FileUnit>
  <project_file>true</project_file>
  <srpkg>
   <core:SymbolRef name='kiev&#31;ir' full='true' />
  </srpkg>
  <members>
   <core:Import all='false' methods='false'>
    <name>
     <core:SymbolRef name='kiev&#31;stdlib&#31;Syntax' full='true' />
    </name>
    <mode>IMPORT_SYNTAX</mode>
   </core:Import>
   <core:Import all='true' methods='false'>
    <name>
     <core:SymbolRef name='kiev&#31;vlang' full='true' />
    </name>
    <mode>IMPORT_CLASS</mode>
   </core:Import>
   <core:Import all='false' methods='false'>
    <name>
     <core:SymbolRef name='kiev&#31;vlang&#31;RuleIsoneofExpr&#31;IsoneofMode' full='true' />
    </name>
    <mode>IMPORT_CLASS</mode>
   </core:Import>
   <core:MetaTypeDecl name='RuleTemplates'>
    <members>
     <core:Method name='mkRuleBlock'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env$'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:Label name='enter$1'>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:Label>
         <core:JavaClass name='frame$$'>
          <members>
           <core:Ctor>
            <type_ret>
             <core:TypeNameRef ident='void' />
            </type_ret>
            <body>
             <core:Block />
            </body>
           </core:Ctor>
           <core:Field name='bt$'>
            <vtype>
             <core:TypeNameRef ident='int' />
            </vtype>
           </core:Field>
          </members>
          <super_types>
           <core:TypeNameRef ident='rule' />
          </super_types>
          <metas>
           <core:MetaStatic />
          </metas>
         </core:JavaClass>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='frame$$' />
          </vtype>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
         </core:LVar>
         <core:If>
          <cond>
           <core:Cmp op='V == V' ident='ref_eq'>
            <expr1>
             <core:LVarExpr ident='$env$' />
            </expr1>
            <expr2>
             <core:ConstNullExpr />
            </expr2>
           </core:Cmp>
          </cond>
          <thenSt>
           <core:Block>
            <stats>
             <core:ExprSt>
              <expr>
               <core:Set op='V = V' ident='ref_assign'>
                <lval>
                 <core:LVarExpr ident='$env' />
                </lval>
                <value>
                 <core:New>
                  <ntype>
                   <core:TypeNameRef ident='frame$$' />
                  </ntype>
                 </core:New>
                </value>
               </core:Set>
              </expr>
             </core:ExprSt>
             <core:ExprSt>
              <expr>
               <core:Set op='V = V' ident='assign'>
                <lval>
                 <core:LVarExpr ident='bt$' />
                </lval>
                <value>
                 <core:ConstIntExpr value='0' />
                </value>
               </core:Set>
              </expr>
             </core:ExprSt>
             <core:Goto ident='enter$1' />
            </stats>
           </core:Block>
          </thenSt>
          <elseSt>
           <core:Block>
            <stats>
             <core:ExprSt>
              <expr>
               <core:Set op='V = V' ident='ref_assign'>
                <lval>
                 <core:LVarExpr ident='$env' />
                </lval>
                <value>
                 <core:Cast>
                  <ctype>
                   <core:TypeNameRef ident='frame$$' />
                  </ctype>
                  <expr>
                   <core:LVarExpr ident='$env$' />
                  </expr>
                 </core:Cast>
                </value>
               </core:Set>
              </expr>
             </core:ExprSt>
             <core:ExprSt>
              <expr>
               <core:Set op='V = V' ident='assign'>
                <lval>
                 <core:LVarExpr ident='bt$' />
                </lval>
                <value>
                 <core:IFld ident='bt$'>
                  <obj>
                   <core:LVarExpr ident='$env' />
                  </obj>
                 </core:IFld>
                </value>
               </core:Set>
              </expr>
             </core:ExprSt>
            </stats>
           </core:Block>
          </elseSt>
         </core:If>
         <core:Switch>
          <sel>
           <core:LVarExpr ident='bt$' />
          </sel>
          <lblcnt>
           <core:Label />
          </lblcnt>
          <stats>
           <core:Case>
            <val>
             <core:ConstIntExpr value='0' />
            </val>
           </core:Case>
           <core:Return>
            <expr>
             <core:ConstNullExpr />
            </expr>
           </core:Return>
          </stats>
          <lblbrk>
           <core:Label />
          </lblbrk>
         </core:Switch>
         <core:Return>
          <expr>
           <core:ConstNullExpr />
          </expr>
         </core:Return>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
      </metas>
     </core:Method>
     <core:Method name='createCodeBacktrack'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='ASTRuleNode' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
       <core:LVar name='load'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
      </params>
      <body>
       <macro:BlockRewr>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:Label name='enter${node>next_back>idx}'>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:Label>
         <macro:IfElseRewr>
          <cond>
           <core:UnaryOp op='! V'>
            <expr>
             <macro:MacroAccess ident='more_back'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr>
           </core:UnaryOp>
          </cond>
          <thenSt>
           <core:Return>
            <expr>
             <core:ConstNullExpr />
            </expr>
           </core:Return>
          </thenSt>
          <elseSt>
           <macro:IfElseRewr>
            <cond>
             <macro:MacroAccess ident='jump_to_back'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </cond>
            <thenSt>
             <macro:IfElseRewr>
              <cond>
               <core:LVarExpr ident='load' />
              </cond>
              <thenSt>
               <macro:BlockRewr>
                <stats>
                 <core:ExprSt>
                  <expr>
                   <core:BinOp op='V = V'>
                    <expr1>
                     <core:LVarExpr ident='bt$' />
                    </expr1>
                    <expr2>
                     <core:Access ident='bt${node>depth}' full='true'>
                      <obj>
                       <core:LVarExpr ident='$env' />
                      </obj>
                     </core:Access>
                    </expr2>
                   </core:BinOp>
                  </expr>
                 </core:ExprSt>
                 <core:Goto ident='enter${node>next_back>idx}' full='true' />
                </stats>
               </macro:BlockRewr>
              </thenSt>
              <elseSt>
               <core:Goto ident='enter${node>next_back>idx}' full='true' />
              </elseSt>
             </macro:IfElseRewr>
            </thenSt>
            <elseSt>
             <macro:IfElseRewr>
              <cond>
               <core:LVarExpr ident='load' />
              </cond>
              <thenSt>
               <macro:BlockRewr>
                <stats>
                 <core:ExprSt>
                  <expr>
                   <core:BinOp op='V = V'>
                    <expr1>
                     <core:LVarExpr ident='bt$' />
                    </expr1>
                    <expr2>
                     <core:Access ident='bt${node>depth}' full='true'>
                      <obj>
                       <core:LVarExpr ident='$env' />
                      </obj>
                     </core:Access>
                    </expr2>
                   </core:BinOp>
                  </expr>
                 </core:ExprSt>
                 <core:GotoCase>
                  <expr>
                   <core:LVarExpr ident='bt$' />
                  </expr>
                 </core:GotoCase>
                </stats>
               </macro:BlockRewr>
              </thenSt>
              <elseSt>
               <core:GotoCase>
                <expr>
                 <core:LVarExpr ident='bt$' />
                </expr>
               </core:GotoCase>
              </elseSt>
             </macro:IfElseRewr>
            </elseSt>
           </macro:IfElseRewr>
          </elseSt>
         </macro:IfElseRewr>
        </stats>
       </macro:BlockRewr>
      </body>
      <metas>
       <core:MetaStatic />
       <core:MetaMacro />
      </metas>
     </core:Method>
     <core:Method name='createCodeMoreCheck'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='ASTRuleNode' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
       <core:LVar name='force'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
      </params>
      <body>
       <macro:BlockRewr>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:Label name='enter${node>next_check>idx}'>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:Label>
         <macro:IfElseRewr>
          <cond>
           <core:Not ident='bool_not'>
            <expr>
             <macro:MacroAccess ident='more_check'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr>
           </core:Not>
          </cond>
          <thenSt>
           <macro:BlockRewr>
            <stats>
             <core:ExprSt>
              <expr>
               <core:BinOp op='V = V'>
                <expr1>
                 <core:Access ident='bt$'>
                  <obj>
                   <core:LVarExpr ident='$env' />
                  </obj>
                 </core:Access>
                </expr1>
                <expr2>
                 <core:LVarExpr ident='bt$' />
                </expr2>
               </core:BinOp>
              </expr>
             </core:ExprSt>
             <core:Return>
              <expr>
               <core:LVarExpr ident='$env' />
              </expr>
             </core:Return>
            </stats>
           </macro:BlockRewr>
          </thenSt>
          <elseSt>
           <macro:IfElseRewr>
            <cond>
             <core:Or ident='bool_or'>
              <expr1>
               <core:LVarExpr ident='force' />
              </expr1>
              <expr2>
               <core:Cmp op='V != V' ident='ref_neq'>
                <expr1>
                 <macro:MacroAccess ident='idx'>
                  <obj>
                   <macro:MacroAccess ident='next_check'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </obj>
                 </macro:MacroAccess>
                </expr1>
                <expr2>
                 <core:BinOp op='V + V'>
                  <expr1>
                   <macro:MacroAccess ident='idx'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr1>
                  <expr2>
                   <core:ConstIntExpr value='1' />
                  </expr2>
                 </core:BinOp>
                </expr2>
               </core:Cmp>
              </expr2>
             </core:Or>
            </cond>
            <thenSt>
             <core:Goto ident='enter${node>next_check>idx}' />
            </thenSt>
            <elseSt>
             <macro:RewriteNodeFactory ident='NoOp' />
            </elseSt>
           </macro:IfElseRewr>
          </elseSt>
         </macro:IfElseRewr>
        </stats>
       </macro:BlockRewr>
      </body>
      <metas>
       <core:MetaStatic />
       <core:MetaMacro />
      </metas>
     </core:Method>
     <core:Method name='mkRuleIstheExpr'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleIstheExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <core:If>
            <cond>
             <core:Access ident='$is_bound'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </cond>
            <thenSt>
             <core:Goto ident='bound${node>idx}' />
            </thenSt>
           </core:If>
          </stat>
         </core:LblSt>
         <core:If>
          <cond>
           <core:UnaryOp op='! V'>
            <expr>
             <core:Call ident='$bind_chk'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
              <args>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='expr'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </args>
             </core:Call>
            </expr>
           </core:UnaryOp>
          </cond>
          <thenSt>
           <core:Call ident='createCodeBacktrack'>
            <obj>
             <core:TypeNameRef ident='RuleTemplates' />
            </obj>
            <args>
             <core:LVarExpr ident='node' />
             <core:ConstBoolExpr value='false' />
            </args>
           </core:Call>
          </thenSt>
         </core:If>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:Access ident='bt${node>depth}'>
              <obj>
               <core:LVarExpr ident='$env' />
              </obj>
             </core:Access>
            </expr1>
            <expr2>
             <core:LVarExpr ident='bt$' />
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:LVarExpr ident='bt$' />
            </expr1>
            <expr2>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:Call ident='createCodeMoreCheck'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='true' />
          </args>
         </core:Call>
         <core:Case>
          <val>
           <macro:MacroAccess ident='base'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </val>
         </core:Case>
         <core:ExprSt>
          <expr>
           <core:Call ident='$unbind'>
            <obj>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='var'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
            </obj>
           </core:Call>
          </expr>
         </core:ExprSt>
         <core:Call ident='createCodeBacktrack'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='true' />
          </args>
         </core:Call>
         <core:LblSt>
          <lbl>
           <core:Label name='bound${node>idx}' />
          </lbl>
          <stat>
           <core:If>
            <cond>
             <core:UnaryOp op='! V'>
              <expr>
               <core:Call ident='equals'>
                <obj>
                 <macro:MacroSubstExpr>
                  <expr>
                   <macro:MacroAccess ident='var'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr>
                 </macro:MacroSubstExpr>
                </obj>
                <args>
                 <macro:MacroSubstExpr>
                  <expr>
                   <macro:MacroAccess ident='expr'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr>
                 </macro:MacroSubstExpr>
                </args>
               </core:Call>
              </expr>
             </core:UnaryOp>
            </cond>
            <thenSt>
             <core:Call ident='createCodeBacktrack'>
              <obj>
               <core:TypeNameRef ident='RuleTemplates' />
              </obj>
              <args>
               <core:LVarExpr ident='node' />
               <core:ConstBoolExpr value='false' />
              </args>
             </core:Call>
            </thenSt>
           </core:If>
          </stat>
         </core:LblSt>
         <core:Call ident='createCodeMoreCheck'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='false' />
          </args>
         </core:Call>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='createCodeContains'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleIsoneofExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
      </params>
      <body>
       <macro:BlockRewr>
        <stats>
         <macro:SwitchRewr>
          <sel>
           <macro:MacroAccess ident='mode'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </sel>
          <stats>
           <core:Case>
            <val>
             <core:ConstStringExpr>
              <value>ARRAY</value>
             </core:ConstStringExpr>
            </val>
           </core:Case>
           <core:Call ident='contains'>
            <obj>
             <core:TypeNameRef ident='kiev&#31;stdlib&#31;ArrayEnumerator' full='true' />
            </obj>
            <args>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
             <core:Access ident='$var'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </args>
           </core:Call>
           <core:Case>
            <val>
             <core:SFld ident='KENUM'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:Call ident='contains'>
            <obj>
             <core:TypeNameRef ident='kiev&#31;stdlib&#31;rule' full='true' />
            </obj>
            <args>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
             <core:Access ident='$var'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </args>
           </core:Call>
           <core:Case>
            <val>
             <core:SFld ident='JENUM'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:Call ident='jcontains'>
            <obj>
             <core:TypeNameRef ident='kiev&#31;stdlib&#31;rule' full='true' />
            </obj>
            <args>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
             <core:Access ident='$var'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </args>
           </core:Call>
           <core:Case>
            <val>
             <core:SFld ident='ELEMS'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:Call ident='contains'>
            <obj>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
            </obj>
            <args>
             <core:Access ident='$var'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </args>
           </core:Call>
          </stats>
         </macro:SwitchRewr>
        </stats>
       </macro:BlockRewr>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='mkRuleIsoneofExpr'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleIsoneofExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <core:If>
            <cond>
             <core:Access ident='$is_bound'>
              <obj>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='var'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </obj>
             </core:Access>
            </cond>
            <thenSt>
             <core:Goto ident='bound${node>idx}' />
            </thenSt>
           </core:If>
          </stat>
         </core:LblSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:Access ident='bt${node>depth}'>
              <obj>
               <core:LVarExpr ident='$env' />
              </obj>
             </core:Access>
            </expr1>
            <expr2>
             <core:LVarExpr ident='bt$' />
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:LVarExpr ident='bt$' />
            </expr1>
            <expr2>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <macro:SwitchRewr>
          <sel>
           <macro:MacroAccess ident='mode'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </sel>
          <stats>
           <core:Case>
            <val>
             <core:SFld ident='ARRAY'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='$iter${node>iter_var}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <core:New>
                <ntype>
                 <macro:MacroSubstTypeRef>
                  <mtype>
                   <macro:MacroAccess ident='itype'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </mtype>
                 </macro:MacroSubstTypeRef>
                </ntype>
                <args>
                 <macro:MacroSubstExpr>
                  <expr>
                   <macro:MacroAccess ident='expr'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr>
                 </macro:MacroSubstExpr>
                </args>
               </core:New>
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
           <core:Case>
            <val>
             <core:SFld ident='KENUM'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='$iter${node>iter_var}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='expr'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
           <core:Case>
            <val>
             <core:SFld ident='JENUM'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='$iter${node>iter_var}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='expr'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
           <core:Case>
            <val>
             <core:SFld ident='ELEMS'>
              <obj>
               <core:TypeNameRef ident='IsoneofMode' />
              </obj>
             </core:SFld>
            </val>
           </core:Case>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='$iter${node>iter_var}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <core:Call ident='elements'>
                <obj>
                 <macro:MacroSubstExpr>
                  <expr>
                   <macro:MacroAccess ident='expr'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr>
                 </macro:MacroSubstExpr>
                </obj>
               </core:Call>
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
          </stats>
         </macro:SwitchRewr>
         <core:Case>
          <val>
           <macro:MacroAccess ident='base'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </val>
         </core:Case>
         <core:While>
          <cond>
           <core:Call ident='hasMoreElements'>
            <obj>
             <core:Access ident='$iter${node>iter_var}'>
              <obj>
               <core:LVarExpr ident='$env' />
              </obj>
             </core:Access>
            </obj>
           </core:Call>
          </cond>
          <body>
           <core:Block>
            <stats>
             <core:If>
              <cond>
               <core:UnaryOp op='! V'>
                <expr>
                 <core:Call ident='$rebind_chk'>
                  <obj>
                   <macro:MacroSubstExpr>
                    <expr>
                     <macro:MacroAccess ident='var'>
                      <obj>
                       <core:LVarExpr ident='node' />
                      </obj>
                     </macro:MacroAccess>
                    </expr>
                   </macro:MacroSubstExpr>
                  </obj>
                  <args>
                   <core:Call ident='nextElement'>
                    <obj>
                     <core:Access ident='$iter${node>iter_var}'>
                      <obj>
                       <core:LVarExpr ident='$env' />
                      </obj>
                     </core:Access>
                    </obj>
                   </core:Call>
                  </args>
                 </core:Call>
                </expr>
               </core:UnaryOp>
              </cond>
              <thenSt>
               <core:Continue ident='' />
              </thenSt>
             </core:If>
             <core:Call ident='createCodeMoreCheck'>
              <obj>
               <core:TypeNameRef ident='RuleTemplates' />
              </obj>
              <args>
               <core:LVarExpr ident='node' />
               <core:ConstBoolExpr value='true' />
              </args>
             </core:Call>
            </stats>
           </core:Block>
          </body>
          <lblcnt>
           <core:Label />
          </lblcnt>
          <lblbrk>
           <core:Label />
          </lblbrk>
         </core:While>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:Access ident='$iter${node>iter_var}'>
              <obj>
               <core:LVarExpr ident='$env' />
              </obj>
             </core:Access>
            </expr1>
            <expr2>
             <core:ConstNullExpr />
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:ExprSt>
          <expr>
           <core:Call ident='$unbind'>
            <obj>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='var'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
            </obj>
           </core:Call>
          </expr>
         </core:ExprSt>
         <core:Call ident='createCodeBacktrack'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='true' />
          </args>
         </core:Call>
         <core:LblSt>
          <lbl>
           <core:Label name='bound${node>idx}' />
          </lbl>
          <stat>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='bt${node>depth}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <core:LVarExpr ident='bt$' />
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
          </stat>
         </core:LblSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:LVarExpr ident='bt$' />
            </expr1>
            <expr2>
             <core:BinOp op='V + V'>
              <expr1>
               <macro:MacroAccess ident='base'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr1>
              <expr2>
               <core:ConstIntExpr value='1' />
              </expr2>
             </core:BinOp>
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:If>
          <cond>
           <core:Call ident='createCodeContains'>
            <obj>
             <core:TypeNameRef ident='RuleTemplates' />
            </obj>
            <args>
             <core:LVarExpr ident='node' />
            </args>
           </core:Call>
          </cond>
          <thenSt>
           <core:Call ident='createCodeMoreCheck'>
            <obj>
             <core:TypeNameRef ident='RuleTemplates' />
            </obj>
            <args>
             <core:LVarExpr ident='node' />
             <core:ConstBoolExpr value='true' />
            </args>
           </core:Call>
          </thenSt>
         </core:If>
         <core:Case>
          <val>
           <core:BinOp op='V + V'>
            <expr1>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr1>
            <expr2>
             <core:ConstIntExpr value='1' />
            </expr2>
           </core:BinOp>
          </val>
         </core:Case>
         <core:Call ident='createCodeBacktrack'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='true' />
          </args>
         </core:Call>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='mkRuleCutExpr'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleCutExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <core:ExprSt>
            <expr>
             <core:Set op='V = V' ident='assign'>
              <lval>
               <core:LVarExpr ident='bt$' />
              </lval>
              <value>
               <core:ConstIntExpr value='0' />
              </value>
             </core:Set>
            </expr>
           </core:ExprSt>
          </stat>
         </core:LblSt>
         <core:Call ident='createCodeMoreCheck'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='false' />
          </args>
         </core:Call>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='mkRuleCallExpr'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleCallExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
       <core:LVar name='is_super'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='bt${node>depth}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <core:LVarExpr ident='bt$' />
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
          </stat>
         </core:LblSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:LVarExpr ident='bt$' />
            </expr1>
            <expr2>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:Case>
          <val>
           <macro:MacroAccess ident='base'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </val>
         </core:Case>
         <core:If>
          <cond>
           <core:UnaryOp op='! V'>
            <expr>
             <macro:IfElseRewr>
              <cond>
               <core:LVarExpr ident='is_super' />
              </cond>
              <thenSt>
               <core:BinOp op='V = V'>
                <expr1>
                 <core:Access ident='$rc$frame${node>env_var}'>
                  <obj>
                   <core:LVarExpr ident='$env' />
                  </obj>
                 </core:Access>
                </expr1>
                <expr2>
                 <core:Call ident='{node>ident}'>
                  <obj>
                   <macro:MacroSubstExpr>
                    <expr>
                     <core:Super super='true' />
                    </expr>
                   </macro:MacroSubstExpr>
                  </obj>
                  <args>
                   <macro:MacroAccess ident='args'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </args>
                 </core:Call>
                </expr2>
               </core:BinOp>
              </thenSt>
              <elseSt>
               <core:BinOp op='V = V'>
                <expr1>
                 <core:Access ident='$rc$frame${node>env_var}'>
                  <obj>
                   <core:LVarExpr ident='$env' />
                  </obj>
                 </core:Access>
                </expr1>
                <expr2>
                 <core:Call ident='{node>ident}'>
                  <obj>
                   <macro:MacroSubstExpr>
                    <expr>
                     <core:IFld ident='obj'>
                      <obj>
                       <core:LVarExpr ident='node' />
                      </obj>
                     </core:IFld>
                    </expr>
                   </macro:MacroSubstExpr>
                  </obj>
                  <args>
                   <macro:MacroAccess ident='args'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </args>
                 </core:Call>
                </expr2>
               </core:BinOp>
              </elseSt>
             </macro:IfElseRewr>
            </expr>
           </core:UnaryOp>
          </cond>
          <thenSt>
           <core:Call ident='createCodeBacktrack'>
            <obj>
             <core:TypeNameRef ident='RuleTemplates' />
            </obj>
            <args>
             <core:LVarExpr ident='node' />
             <core:ConstBoolExpr value='true' />
            </args>
           </core:Call>
          </thenSt>
         </core:If>
         <core:Call ident='createCodeMoreCheck'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='false' />
          </args>
         </core:Call>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='mkRuleExpr'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
       <core:LVar name='has_bt_expr'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
       <core:LVar name='is_boolean'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <macro:IfElseRewr>
            <cond>
             <core:LVarExpr ident='is_boolean' />
            </cond>
            <thenSt>
             <core:Block>
              <stats>
               <core:If>
                <cond>
                 <core:UnaryOp op='! V'>
                  <expr>
                   <macro:MacroAccess ident='expr'>
                    <obj>
                     <core:LVarExpr ident='node' />
                    </obj>
                   </macro:MacroAccess>
                  </expr>
                 </core:UnaryOp>
                </cond>
                <thenSt>
                 <core:Call ident='createCodeBacktrack'>
                  <obj>
                   <core:TypeNameRef ident='RuleTemplates' />
                  </obj>
                  <args>
                   <core:LVarExpr ident='node' />
                   <core:ConstBoolExpr value='false' />
                  </args>
                 </core:Call>
                </thenSt>
               </core:If>
               <core:Call ident='createCodeMoreCheck'>
                <obj>
                 <core:TypeNameRef ident='RuleTemplates' />
                </obj>
                <args>
                 <core:LVarExpr ident='node' />
                 <core:ConstBoolExpr value='false' />
                </args>
               </core:Call>
              </stats>
             </core:Block>
            </thenSt>
            <elseSt>
             <macro:IfElseRewr>
              <cond>
               <core:Not ident='bool_not'>
                <expr>
                 <core:LVarExpr ident='has_bt_expr' />
                </expr>
               </core:Not>
              </cond>
              <thenSt>
               <core:Block>
                <stats>
                 <core:ExprSt>
                  <expr>
                   <macro:MacroSubstExpr>
                    <expr>
                     <macro:MacroAccess ident='expr'>
                      <obj>
                       <core:LVarExpr ident='node' />
                      </obj>
                     </macro:MacroAccess>
                    </expr>
                   </macro:MacroSubstExpr>
                  </expr>
                 </core:ExprSt>
                 <core:Call ident='createCodeMoreCheck'>
                  <obj>
                   <core:TypeNameRef ident='RuleTemplates' />
                  </obj>
                  <args>
                   <core:LVarExpr ident='node' />
                   <core:ConstBoolExpr value='false' />
                  </args>
                 </core:Call>
                </stats>
               </core:Block>
              </thenSt>
              <elseSt>
               <core:Block>
                <stats>
                 <core:ExprSt>
                  <expr>
                   <core:BinOp op='V = V'>
                    <expr1>
                     <core:Access ident='bt${node>depth}'>
                      <obj>
                       <core:LVarExpr ident='$env' />
                      </obj>
                     </core:Access>
                    </expr1>
                    <expr2>
                     <core:LVarExpr ident='bt$' />
                    </expr2>
                   </core:BinOp>
                  </expr>
                 </core:ExprSt>
                 <core:ExprSt>
                  <expr>
                   <core:BinOp op='V = V'>
                    <expr1>
                     <core:LVarExpr ident='bt$' />
                    </expr1>
                    <expr2>
                     <macro:MacroAccess ident='base'>
                      <obj>
                       <core:LVarExpr ident='node' />
                      </obj>
                     </macro:MacroAccess>
                    </expr2>
                   </core:BinOp>
                  </expr>
                 </core:ExprSt>
                 <core:ExprSt>
                  <expr>
                   <macro:MacroSubstExpr>
                    <expr>
                     <macro:MacroAccess ident='expr'>
                      <obj>
                       <core:LVarExpr ident='node' />
                      </obj>
                     </macro:MacroAccess>
                    </expr>
                   </macro:MacroSubstExpr>
                  </expr>
                 </core:ExprSt>
                 <core:Call ident='createCodeMoreCheck'>
                  <obj>
                   <core:TypeNameRef ident='RuleTemplates' />
                  </obj>
                  <args>
                   <core:LVarExpr ident='node' />
                   <core:ConstBoolExpr value='true' />
                  </args>
                 </core:Call>
                </stats>
               </core:Block>
              </elseSt>
             </macro:IfElseRewr>
            </elseSt>
           </macro:IfElseRewr>
          </stat>
         </core:LblSt>
         <macro:IfElseRewr>
          <cond>
           <core:LVarExpr ident='has_bt_expr' />
          </cond>
          <thenSt>
           <core:Case>
            <val>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </val>
           </core:Case>
          </thenSt>
          <elseSt>
           <macro:RewriteNodeFactory ident='NoOp' />
          </elseSt>
         </macro:IfElseRewr>
         <macro:IfElseRewr>
          <cond>
           <core:LVarExpr ident='has_bt_expr' />
          </cond>
          <thenSt>
           <core:Block>
            <stats>
             <core:ExprSt>
              <expr>
               <macro:MacroSubstExpr>
                <expr>
                 <macro:MacroAccess ident='bt_expr'>
                  <obj>
                   <core:LVarExpr ident='node' />
                  </obj>
                 </macro:MacroAccess>
                </expr>
               </macro:MacroSubstExpr>
              </expr>
             </core:ExprSt>
             <core:Call ident='createCodeBacktrack'>
              <obj>
               <core:TypeNameRef ident='RuleTemplates' />
              </obj>
              <args>
               <core:LVarExpr ident='node' />
               <core:ConstBoolExpr value='true' />
              </args>
             </core:Call>
            </stats>
           </core:Block>
          </thenSt>
          <elseSt>
           <macro:RewriteNodeFactory ident='NoOp' />
          </elseSt>
         </macro:IfElseRewr>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
     <core:Method name='mkRuleWhile'>
      <type_ret>
       <core:TypeRef ident='void' />
      </type_ret>
      <params>
       <core:LVar name='node'>
        <vtype>
         <core:TypeExpr ident='_astnode_'>
          <arg>
           <core:TypeNameRef ident='RuleWhileExpr' />
          </arg>
          <op_name>T #</op_name>
         </core:TypeExpr>
        </vtype>
       </core:LVar>
       <core:LVar name='has_bt_expr'>
        <vtype>
         <core:TypeNameRef ident='boolean' />
        </vtype>
       </core:LVar>
      </params>
      <body>
       <core:Block>
        <stats>
         <core:LVar name='$env'>
          <vtype>
           <core:TypeNameRef ident='rule' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LVar name='bt$'>
          <vtype>
           <core:TypeNameRef ident='int' />
          </vtype>
          <metas>
           <core:UserMeta>
            <qname>kiev&#31;stdlib&#31;meta&#31;extern</qname>
            <decl>
             <core:SymbolRef name='kiev&#31;stdlib&#31;meta&#31;extern' full='true' />
            </decl>
           </core:UserMeta>
          </metas>
         </core:LVar>
         <core:LblSt>
          <lbl>
           <core:Label name='enter${node>idx}' />
          </lbl>
          <stat>
           <core:ExprSt>
            <expr>
             <core:BinOp op='V = V'>
              <expr1>
               <core:Access ident='bt${node>depth}'>
                <obj>
                 <core:LVarExpr ident='$env' />
                </obj>
               </core:Access>
              </expr1>
              <expr2>
               <core:LVarExpr ident='bt$' />
              </expr2>
             </core:BinOp>
            </expr>
           </core:ExprSt>
          </stat>
         </core:LblSt>
         <core:ExprSt>
          <expr>
           <core:BinOp op='V = V'>
            <expr1>
             <core:LVarExpr ident='bt$' />
            </expr1>
            <expr2>
             <macro:MacroAccess ident='base'>
              <obj>
               <core:LVarExpr ident='node' />
              </obj>
             </macro:MacroAccess>
            </expr2>
           </core:BinOp>
          </expr>
         </core:ExprSt>
         <core:Case>
          <val>
           <macro:MacroAccess ident='base'>
            <obj>
             <core:LVarExpr ident='node' />
            </obj>
           </macro:MacroAccess>
          </val>
         </core:Case>
         <macro:IfElseRewr>
          <cond>
           <core:LVarExpr ident='has_bt_expr' />
          </cond>
          <thenSt>
           <core:ExprSt>
            <expr>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='bt_expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
            </expr>
           </core:ExprSt>
          </thenSt>
          <elseSt>
           <macro:RewriteNodeFactory ident='NoOp' />
          </elseSt>
         </macro:IfElseRewr>
         <core:If>
          <cond>
           <core:UnaryOp op='! V'>
            <expr>
             <macro:MacroSubstExpr>
              <expr>
               <macro:MacroAccess ident='expr'>
                <obj>
                 <core:LVarExpr ident='node' />
                </obj>
               </macro:MacroAccess>
              </expr>
             </macro:MacroSubstExpr>
            </expr>
           </core:UnaryOp>
          </cond>
          <thenSt>
           <core:Call ident='createCodeBacktrack'>
            <obj>
             <core:TypeNameRef ident='RuleTemplates' />
            </obj>
            <args>
             <core:LVarExpr ident='node' />
             <core:ConstBoolExpr value='true' />
            </args>
           </core:Call>
          </thenSt>
         </core:If>
         <core:Call ident='createCodeMoreCheck'>
          <obj>
           <core:TypeNameRef ident='RuleTemplates' />
          </obj>
          <args>
           <core:LVarExpr ident='node' />
           <core:ConstBoolExpr value='false' />
          </args>
         </core:Call>
        </stats>
       </core:Block>
      </body>
      <metas>
       <core:MetaMacro />
       <core:MetaStatic />
      </metas>
     </core:Method>
    </members>
    <super_types>
     <core:TypeNameRef ident='any' />
    </super_types>
    <metas>
     <core:MetaStatic />
    </metas>
   </core:MetaTypeDecl>
  </members>
 </core:FileUnit>
</sop:dump>